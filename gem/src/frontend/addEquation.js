// Generated by CoffeeScript 1.6.3
(function() {
  define(["jquery", "frontend/setEventHandlers", "frontend/settings", "backend/equationIndex"], function($, setEventHandlers, settings, equationIndex) {
    var addEquationToWhiteboard;
    addEquationToWhiteboard = function(equation, equationID) {
      var equationDiv, html;
      if (settings.mathJaxEnabled) {
        html = equation.toMathML(equationID);
        equationDiv = $(html);
        $("#whiteboard-panel").append(equationDiv);
        MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        return MathJax.Hub.Queue(function() {
          return setEventHandlers(equationDiv);
        });
      } else {
        html = equation.toHTML(equationID);
        equationDiv = $(html);
        $("#whiteboard-panel").append(equationDiv);
        return setEventHandlers(equationDiv);
      }
    };
    return function(equation) {
      var equationID;
      equationID = equationIndex.add(equation);
      addEquationToWhiteboard(equation, equationID);
      return equationID;
    };
  });

}).call(this);
