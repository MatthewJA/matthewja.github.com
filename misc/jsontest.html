<html>
<head>
	<title>JSON test</title>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	<style type="text/css">
		.commit {
			margin-left: 20px;
		}
	</style>
</head>
<body>
	<script type="text/javascript">
		$(function() {
			var div = $("<div>");
			$("body").append(div);
			$.getJSON("https://api.github.com/users/MatthewJA/events?&page=1", function(data) {

				var last_seen = null;
				var last_item = null;

				for (var i = 0; i < data.length; i++) {
					if(data[i].type == "PushEvent") {
						if(last_seen != data[i].repo.name) {
							last_seen = data[i].repo.name;
							var item = $("<div class=\"event\">");

							var info = $("<div class=\"info\">");
							var to = data[i].repo.name;
							var to_url = data[i].repo.url;
							info.html(
								"Pushed to <a href=\"http://github.com/" + to_url + "\">" + to + "</a>");
							item.append(info);

							div.append(last_item)
							last_item = item;
						}

						var commits = data[i].payload.commits;
						for (var ii = 0; ii < commits.length; ii++) {
							var commit = $("<div class=\"commit\">");
							var message = commits[ii].message;
							var message_url = commits[ii].url;

							commit.html(
								"<a href=\"http://github.com/" + last_seen + message_url + "\">" + message + "</a>");
							last_item.append(commit);
						};
					}
				};
			});
		});
	</script>
</body>
</html>